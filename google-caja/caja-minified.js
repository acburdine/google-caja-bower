(function(){function f(n){throw n;}
var h=void 0,i=!0,j=null,M=function(){function n(a){return function(b,e,d){if(b){var k="caja_ajax_"+E++;window[k]=function(a){try{d(a)}finally{window[k]=h}};F(k,(a?""+a:g.server)+"/proxy?url="+encodeURIComponent(b.toString())+"&input-mime-type="+encodeURIComponent(e)+"&callback="+encodeURIComponent(k)+"&alt=json-in-script")}else d(h)}}function o(a){return function(){p&&p.console[a].apply(p.console,arguments)}}function c(){f(Error("Calling taming function before Caja is ready"))}function z(a,b,e){"UNREADY"!==
l&&f(Error("Caja cannot be initialized more than once"));l="PENDING";v(a,function(a){q=a;g.iframe=a.iframe;g.USELESS=a.USELESS;for(var e in g)g[e]===c&&(g[e]=a[e]);a.disableSecurityForDebugger(A);l="READY";a={es5Mode:i};"function"===typeof b&&b(a);w(j)},function(a){l="UNREADY";e(a)})}function w(a){"function"===typeof a&&r.push(a);if("READY"===l){for(a=0;a<r.length;a++)setTimeout(r[a],0);r=[]}}function v(a,b,e){x(window);p=a=G(a);g.server=a.server;H(a,b,e)}function G(a){var a=a||{},b={};b.server=""+
(a.server||a.cajaServer||I);b.resources=""+(a.resources||b.server);b.debug=!!a.debug;"forceES5Mode"in a&&a.forceES5Mode!==i&&a.forceES5Mode!==h&&f(Error("forceES5Mode: false is no longer supported"));"es5Mode"in a&&a.es5Mode!==i&&a.es5Mode!==h&&f(Error("es5Mode: false is no longer supported"));var e=""+(a.maxAcceptableSeverity||"SAFE_SPEC_VIOLATION");"NO_KNOWN_EXPLOIT_SPEC_VIOLATION"===e&&(e="SAFE_SPEC_VIOLATION",b.acceptNoKnownExploitProblems=i);b.maxAcceptableSeverity=e;b.console=a.console?a.console:
a.log?{log:a.log,warn:a.log,error:a.log,info:a.log}:window.console&&"function"===typeof window.console.log?window.console:{log:function(){},warn:function(){},error:function(){},info:function(){}};a.targetAttributePresets&&(a.targetAttributePresets["default"]||f("targetAttributePresets must contain a default"),a.targetAttributePresets.whitelist||f("targetAttributePresets must contain a whitelist"),0===a.targetAttributePresets.whitelist.length&&f("targetAttributePresets.whitelist array must be nonempty"),
b.targetAttributePresets=a.targetAttributePresets);"object"===typeof a.cajolingServiceClient&&(b.cajolingServiceClient=a.cajolingServiceClient);return b}function x(a){a.Object.FERAL_FRAME_OBJECT___!==a.Object&&(a.___={},a.Object.FERAL_FRAME_OBJECT___=a.Object)}function H(a,b,e){var d=J(a,function(b){b=b.ses||(b.ses={});b.maxAcceptableSeverityName=a.maxAcceptableSeverity;a.acceptNoKnownExploitProblems&&(b.acceptableProblems={DEFINING_READ_ONLY_PROTO_FAILS_SILENTLY:{permit:i},PUSH_IGNORES_SEALED:{permit:i,
doNotRepair:i},UNSHIFT_IGNORES_SEALED:{permit:i},SPLICE_IGNORES_SEALED:{permit:i},SHIFT_IGNORES_SEALED:{permit:i},PUSH_DOES_NOT_THROW_ON_FROZEN_ARRAY:{permit:i,doNotRepair:i},ARRAYS_DELETE_NONCONFIGURABLE:{permit:i},ARRAYS_MODIFY_READONLY:{permit:i},FREEZE_IS_FRAME_DEPENDENT:{permit:i},SYNTAX_ERRORS_ARENT_ALWAYS_EARLY:{permit:i},NESTED_STRICT_FUNCTIONS_LEAK:{permit:i}});b.mitigateSrcGotchas=function(){f(new EvalError("This function is a placeholder that should have been replaced by the real ses.mitigateSrcGotchas."))}});
s(a,"utility-frame",function(k){var c=k.ses.mitigateSrcGotchas;d.make(function(d){d.ses.ok()?(d=d.SESFrameGroup(K,a,d,window,{mitigateSrcGotchas:c}),b(d)):(d=Error("Caja: Browser is unsupported"),"function"===typeof e?e(d):f(d))})})}function J(a,b){function e(){if("WAITING"===d&&c){var a=c,b=g;d="IDLE";g=c=j;b(a)}}var d="IDLE",c,g,B={preload:function(){"IDLE"===d&&(d="LOADING",c=j,s(a,"ses-single-frame",function(a){c=a;e()},b))},make:function(c){"LOADING"===d?(d="WAITING",g=c,e()):s(a,"ses-single-frame",
c,b)}};B.preload();return B}function s(a,b,e,d){var c=C(b),g=D(a.resources,t+"/"+b+(a.debug?".js?debug=1":".opt.js?debug=1"));setTimeout(function(){c.cajaIframeDone___=function(){if(t!==c.cajaBuildVersion){var d="Version error: caja.js version "+t+" does not match "+b+" version "+c.cajaBuildVersion+".";(""+t).split(/[mM]/)[0]===(""+c.cajaBuildVersion).split(/[mM]/)[0]?a.console.log(d+"  Continuing because major versions match."):(a.console.log(d),f(Error(d)))}e(c)};d&&d(c);setTimeout(function(){var a=
c.document,b=a.createElement("script");b.setAttribute("type","text/javascript");b.src=g;a.body.appendChild(b)},0)},0)}function C(a){var b=document.createElement("iframe");b.style.display="none";b.width=0;b.height=0;b.className=a||"";a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a);return b.contentWindow}function F(a,b){y||(y=C("loader-frame").document);var c=""+'<script>var $name = parent.window["$name"];<\/script>'.replace(/[$]name/g,a)+'<script type="text/javascript" src="$url"><\/script>'.replace(/[$]url/g,
(""+b).replace(/&/g,"&amp;").replace(/[<]/g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&#34;"));y.write(c)}function D(a,b){a=a.replace(/\/+$/,"");b=b.replace(/^\/+/,"");return a+"/"+b}function m(a,b,c){typeof a!==b&&f(new TypeError("expected "+b+" instead of "+typeof a+": "+(c||a)));return a}var t="5661",I="https://caja.appspot.com/",q,r=[],u=[],L=0,l="UNREADY",p=h,E=1,A=!1,y,g={initialize:z,load:function(a,b,c,d){b=b||g.policy.net.NO_NETWORK;"UNREADY"===l&&z({});w(function(){q.makeES5Frame(a,b,
c,d)})},whenReady:w,policy:{net:{rewriter:{NO_NETWORK:function(){return j},ALL:function(a){return""+a}},fetcher:{USE_XHR:function(a,b,c){var d=new XMLHttpRequest;d.open("GET",a.toString(),i);d.overrideMimeType(b);d.onreadystatechange=function(){4==d.readyState&&c({html:d.responseText})};d.send()},USE_AS_PROXY:n},NO_NETWORK:{rewrite:function(){return j},fetch:function(a,b,c){setTimeout(function(){c({})},0)}},ALL:{rewrite:function(a){return""+a},fetch:n(h)},only:function(a){a=""+a;return{rewrite:function(b){b=
""+b;return b===a?b:j}}}},ATTRIBUTETYPES:h,LOADERTYPES:h,URIEFFECTS:h},iframe:j,USELESS:h,tame:c,tamesTo:c,reTamesTo:c,untame:c,unwrapDom:c,markReadOnlyRecord:c,markFunction:c,markCtor:c,markXo4a:c,grantMethod:c,grantRead:c,grantReadWrite:c,adviseFunctionBefore:c,adviseFunctionAfter:c,adviseFunctionAround:c,makeDefensibleObject___:c,makeDefensibleFunction___:c,initFeralFrame:x,makeFrameGroup:v,configure:v,disableSecurityForDebugger:function(a){A=!!a;q&&q.disableSecurityForDebugger(a)},Q:c,console:{error:o("error"),
info:o("info"),log:o("log"),warn:o("warn")},a:1},K={documentBaseUrl:function(){var a=document.getElementsByTagName("base");if(0==a.length)return document.location.toString();if(1==a.length)return a=a[0].href,"string"!==typeof a&&f(Error("Caja loader error: <base> without a href.")),a;f(Error("Caja loader error: document contains multiple <base>."))},getId:function(a){m(a,"object","imports");var b;b="id___"in a?m(a.id___,"number","id"):a.id___=u.length;u[b]=a;return b},getImports:function(a){var b=
u[m(a,"number","id")];b===h&&f(Error("Internal: imports#",a," unregistered"));return b},joinUrl:D,loadCajaFrame:s,prepareContainerDiv:function(a,b,c){b=(c=c||{},c.idClass)||"caja-guest-"+L++ +"___";a&&9===a.nodeType&&(g.console.warn("Warning: Using a document, rather than an element, as a Caja virtual document container is an experimental feature and may not operate correctly or support all features."),x(a.defaultView));return{idClass:b,opt_div:a}},unregister:function(a){m(a,"object","imports");"id___"in
a&&(a=m(a.id___,"number","id"),u[a]=h)},readPropertyAsHostFrame:function(a,b){return a[b]}};return g}();"undefined"!==typeof window&&(window.caja=M);})();
